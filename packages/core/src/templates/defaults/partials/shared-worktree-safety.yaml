apiVersion: v1
kind: PartialTemplate
metadata:
  name: shared-worktree-safety
  description: Safety rules for sub-agents running in shared worktrees
content: |

  SUB-AGENT SAFETY RULES (CRITICAL):
  This is a SHARED WORKTREE. Multiple sub-agents run concurrently in this directory.
  Every sub-agent prompt you construct MUST include these rules:

  1. NEVER run: git worktree remove, git worktree prune
  2. NEVER run: git checkout, git switch (to a different branch)
  3. NEVER run: git reset --hard, git clean -fd, git restore .
  4. NEVER delete or modify the .git file in the worktree root
  5. Only the orchestrator manages worktree lifecycle
  6. Work only on files relevant to your sub-issue to minimize conflicts
  7. Commit changes with descriptive messages before reporting completion

  Prefix every sub-agent prompt with: "SHARED WORKTREE â€” DO NOT MODIFY GIT STATE"
